---
title: "Task 1 - Decathlon Data"
subtitle: "Dirty Data Project"
output:
  html_document:
    df_print: paged
    toc: true
    toc_float: true
    number_sections: true
date: "`r format(Sys.Date())`"
author: "Lesley Duff"
---
# Decathlon Data

## Introduction
We have a dataset relating to a [Decathlon](https://en.wikipedia.org/wiki/Decathlon) event.

> "The decathlon is a combined event in athletics consisting of ten track and field events...Performance is judged on a points system in each event, not by the position achieved"

There are ten events over two days:

* 100 metres
* Long jump
* Shot put
* High jump
* 400 metres
* 110 metres hurdles
* Discus throw
* Pole vault
* Javelin throw
* 1500 metres

We have details of the athlete `rank` and `points` in each 
`competition`.

There are 32 different athletes in the results.


## Assumptions

* Due to the order and number of the columns I am assuming that this data is 
a male decathlon. Women have a different order of decathlon events and are more 
likely to compete in a seven event 
[heptathlon](https://en.wikipedia.org/wiki/Heptathlon) instead.
* Preliminary cleaning of data reveals we have data for two separate 
competitions - `Decastar` and `OlympicG`.


## Cleaning

* We renamed the column titles to remove full stops and start columns with numbers with an 'x' using `janitor::clean_names()`
* We renamed `javeline` and `x110m_hurdle` to `javelin` and `x110m_hurdles` to better match the English descriptions of the names of the events.
* We converted the original dataset file `raw_data/decathlon.rds` into a CSV 
file to allow for wider usage. 
The cleaned CSV file is at `clean_data/decathlon.csv`.

## Analysis questions   

```{r}
library(here)
library(tidyverse)

# use this to set the path to the data file
decathlon_data <- read_csv(here("clean_data/decathlon.csv"))
```

### Who had the longest long jump seen in the data?

```{r}
decathlon_data %>%
  select(athlete, long_jump) %>%
  arrange(desc(long_jump)) %>%
  slice_max(long_jump, n = 1)
```

Clay had the longest long jump at 7.96m.

### What was the average 100m time in each competition?

```{r}
decathlon_data %>%
  select(x100m, competition) %>%
  group_by(competition) %>%
  summarise(average_100m_time = mean(x100m, na.rm = TRUE))
```

### Who had the highest total points across both competitions?
```{r}
decathlon_data %>%
  select(athlete, points, competition) %>%
  slice_max(points, n = 1)
```


### What was the shot-put scores for the top three competitors in each competition?

```{r}
decathlon_data %>%
  select(shot_put, athlete, competition) %>%
  group_by(competition) %>%
  slice_max(shot_put, n = 3)
```

### What was the average points for competitors who ran the 400m in less than 50 seconds vs. those than ran 400m in more than 50 seconds?
```{r}
decathlon_data %>%
  select(points, x400m) %>%
  filter(x400m < 50) %>%
  summarise(average_points_x400m_under_50s = mean(points))

decathlon_data %>%
  select(points, x400m) %>%
  filter(x400m > 50) %>%
  summarise(average_points_x400m_over_50s = mean(points))
```

## Other observations

### How many competitions did athletes take part in?

```{r}
decathlon_data %>%
  select(athlete, competition) %>% 
  group_by(athlete) %>% 
  summarise(number_competition = n()) %>% 
  arrange(desc(number_competition))
```
## Which athlete had fastest 100m
```{r}
decathlon_data %>%
  select(athlete, x100m) %>% 
  slice_min(x100m, n = 1)
```

